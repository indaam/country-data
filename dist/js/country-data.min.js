!function(t){"use strict";var e={};(e=function(t,a){var n=t,i=function(t,e){return t.showFlag?"<li data-data='"+JSON.stringify(e)+"' data-id='"+e.id+"' data-iso='"+e.iso+"' data-name='"+e.name+"' data-iso_2='"+e.data.iso_2+"' data-iso_3='"+e.data.iso_3+"' data-phone='+"+e.data.phone+"' data-currency='"+e.data.currency+"' data-ttl='"+e.data.ttl+"' data-capital='"+e.data.capital+"'><span class='"+t.namespace+"-flag-wrap'><span class='flag-"+e.iso.toLowerCase()+"'></span></span>"+e.name+"</li>":"<li data-data='"+JSON.stringify(e)+"' data-id='"+e.id+"' data-iso='"+e.iso+"' data-name='"+e.name+"' data-iso_2='"+e.data.iso_2+"' data-iso_3='"+e.data.iso_3+"' data-phone='+"+e.data.phone+"' data-currency='"+e.data.currency+"' data-ttl='"+e.data.ttl+"' data-capital='"+e.data.capital+"'>"+e.name+"</li>"},s=function(t,e){return t.filter(function(t,a){return new RegExp(e).test(t.name)||new RegExp(e).test(t.id)||new RegExp(e).test(t.iso)})},r=function(t,e){for(var a=1;a<arguments.length;a++)for(var n in arguments[a])arguments[a].hasOwnProperty(n)&&(arguments[0][n]=arguments[a][n]);return arguments[0]},l=function(t,e){e=e||document.createElement("div"),t.parentNode.appendChild(e),e.appendChild(t)},o=function(t,e){e=e.toUpperCase();for(var a in t)if(t[a].iso==e)return t[a]};n.Initialize=function(){if(this.hasClick=0,this.tabIndex=-1,this.vars=r({},e.defaults,a),this.CreateIso(),this.CreateCountryList(),this.AppendCountryList(),this.KeyupAction(),this.vars.defaultCountry){var t=o(this.vars.dataCountries,this.vars.defaultCountry),n={},i={};for(var s in t)i[s]="data"==s?JSON.stringify(t[s]):t[s];for(var s in t.data)i[s]="phone"==s?"+"+t.data[s]:t.data[s];n.dataset=i,this.SetVal(n)}"function"==typeof this.vars.run&&this.vars.run(this)},n.CreateIso=function(){var t=this.vars;this.classList.add(t.namespace+"-input"),this.setAttribute("placeholder",t.placeholder),this.parent_container=document.createElement("div"),this.parent_container.setAttribute("class",t.namespace+"-container"),this.parent_root=document.createElement("div"),this.parent_root.setAttribute("class",t.namespace+" "+t.namespace+"-run"),this.input_wrap=document.createElement("div"),this.input_wrap.setAttribute("class",t.namespace+"-input-wrap"),this.input_label=document.createElement("span"),this.input_label.setAttribute("class",t.namespace+"-label"),this.input_label.innerHTML=t.placeholder,l(this,this.parent_root),l(this,this.parent_container),l(this,this.input_wrap),this.__ISO=this.parentElement.parentElement.parentElement,this.__root=this.parentElement.parentElement,this.__input_wrap=this.parentElement,this.__input_wrap.appendChild(this.input_label),this.vars.print&&this.CreateInputList()},n.CreateInputList=function(){var t=this.vars;for(var e in this.list_input=[],this.list_input_wrap=[],this.list_input_label=[],this.list_label_value=[],t.printInput){var a=t.printInput[e].type;this.list_input[a]=document.createElement("input"),this.list_input[a].setAttribute("placeholder",t.printInput[e].placeholder),this.list_input[a].setAttribute("name",a+"-country"),this.list_input[a].setAttribute("type","text"),this.list_input[a].setAttribute("class",t.namespace+"-input"),this.list_input_wrap[a]=this.input_wrap.cloneNode(),this.list_input_label[a]=this.input_label.cloneNode(),this.list_input_label[a].innerHTML="Enter "+t.printInput[e].placeholder,this.list_label_value[a]=document.createElement("span"),this.list_label_value[a].setAttribute("class",t.namespace+"-label-value"),this.__root.appendChild(this.list_input_wrap[a]),this.list_input_wrap[a].appendChild(this.list_input[a]),this.list_input_wrap[a].appendChild(this.list_input_label[a]),this.list_input_wrap[a].appendChild(this.list_label_value[a])}},n.CreateCountryList=function(){this.countryListWrap=document.createElement("div"),this.countryListWrap.setAttribute("class",this.vars.namespace+"-country-list-wrap"),this.countryListWrap.setAttribute("style","margin-top: -1px;display:none;"),this.countryList=document.createElement("ul"),this.countryList.setAttribute("class",this.vars.namespace+"-country-list"),this.__input_wrap.appendChild(this.countryListWrap),this.countryListWrap.appendChild(this.countryList),this.OpenList()},n.AppendCountryList=function(){var t=this,e="";for(var a in t.vars.dataCountries)e+=i(t.vars,t.vars.dataCountries[a]);this.countryList.innerHTML=e,this.countryListChildren=this.countryList.children,this.ClickAction()},n.OpenList=function(){var t=this,e=this.vars;this.addEventListener("focusin",function(){t.countryListWrap.style.display="block",console.log("focusin")}),document.getElementsByTagName("body")[0].addEventListener("click",function(a){console.log(a.target.parentNode.className);var n=e.namespace+"(-input-wrap|-country-list)";new RegExp(n).test(a.target.parentNode.className)||(t.countryListWrap.style.display="none")})},n.KeyupAction=function(t){var e=this;this.addEventListener("keyup",function(t){if(this.value.length>0?e.countryListWrap.style.display="block":e.countryListWrap.style.display="none",40!=t.keyCode&&38!=t.keyCode){var a=this.value,n="",r=s(e.vars.dataCountries,a);if(e.TotalData=r.length,r){for(var l in r)n+=i(e.vars,r[l]);e.countryList.innerHTML=n}"function"==typeof e.vars.keyup&&e.vars.keyup(e,a)}e.UseKey(t)})},n.SetVal=function(t){var e=this,a=t.dataset;if(this.vars.print)for(var n in e.vars.printInput)"phone"==e.vars.printInput[n].type||"currency"==e.vars.printInput[n].type?(e.list_input_wrap[e.vars.printInput[n].type].classList.add(e.vars.namespace+"-have-value"),e.list_label_value[e.vars.printInput[n].type].innerHTML=a[e.vars.printInput[n].type]):e.list_input[e.vars.printInput[n].type].value=a[e.vars.printInput[n].type];e.value=a.name},n.ClickAction=function(t){var e=this,a=this.vars;this.countryList.addEventListener("click",function(t){console.log(t);var n=t.target;n="LI"==t.target.nodeName?t.target:t.target.className==a.namespace+"-flag-wrap"?t.target.parentElement:t.target.parentElement.parentElement,console.log(n),e.SetVal(n),"function"==typeof e.vars.selected&&e.vars.selected(e,n.dataset,JSON.parse(n.dataset.data)),e.countryListWrap.style.display="none"})},n.UseKey=function(t){var e=this,a=this.vars;console.log("_this",e),console.log("_thisTotalData",e.TotalData),40==t.keyCode?(e.tabIndex++,console.log("_thisTotalData",e.TotalData),console.log("_this.tabIndex",e.tabIndex),e.tabIndex>e.TotalData-1&&(e.countryList.children[e.TotalData-1].classList="",e.tabIndex=0),e.countryList.children[e.tabIndex].classList.add(a.namespace+"-selected"),e.tabIndex>=1&&(e.countryList.children[e.tabIndex-1].classList=""),e.tabIndex>=2&&(e.countryListWrap.scrollTop=e.countryList.children[e.tabIndex].offsetTop-2*e.countryList.children[e.tabIndex].offsetHeight),e.SetVal(e.countryList.children[e.tabIndex])):38==t.keyCode&&(e.tabIndex--,e.tabIndex<0&&(e.tabIndex=0),e.countryList.children[e.tabIndex].classList.add(a.namespace+"-selected"),e.tabIndex>=0&&(e.countryList.children[e.tabIndex+1].classList=""),e.tabIndex>=2&&(e.countryListWrap.scrollTop=e.countryList.children[e.tabIndex].offsetTop-2*e.countryList.children[e.tabIndex].offsetHeight),e.SetVal(e.countryList.children[e.tabIndex])),13==t.keyCode&&(e.countryListWrap.style.display="none",e.tabIndex=-1)},n.Initialize()}).defaults={dataCountries:[],namespace:"__COUNTRY",placeholder:"Type a Country",showFlag:!1,defaultCountry:"us",print:!0,printInput:[{type:"phone",placeholder:"Phone Number"},{type:"currency",placeholder:"Currency"},{type:"iso_2",placeholder:"Country Iso"}],run:function(){},selected:function(){},keyup:function(){}},t&&(t.fn.COUNTRY_Data=function(t){return this.each(function(){new e(this,t)})}),"undefined"!=typeof module&&void 0!==module.exports?module.exports=e:window.__COUNTRY_Data=e}("function"==typeof window.jQuery&&window.jQuery);