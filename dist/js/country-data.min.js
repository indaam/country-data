!function(t){"use strict";var e={};(e=function(t,i){var a=t,n={listHtml:function(t,e){return t.showFlag?"<li data-data='"+JSON.stringify(e)+"' data-id='"+e.id+"' data-iso='"+e.iso+"' data-name='"+e.name+"' data-iso_2='"+e.data.iso_2+"' data-iso_3='"+e.data.iso_3+"' data-phone='+"+e.data.phone+"' data-currency='"+e.data.currency+"' data-ttl='"+e.data.ttl+"' data-capital='"+e.data.capital+"'><span class='"+t.namespace+"-flag-wrap'><span class='flag-"+e.iso.toLowerCase()+"'></span></span>"+e.name+"</li>":"<li data-data='"+JSON.stringify(e)+"' data-id='"+e.id+"' data-iso='"+e.iso+"' data-name='"+e.name+"' data-iso_2='"+e.data.iso_2+"' data-iso_3='"+e.data.iso_3+"' data-phone='+"+e.data.phone+"' data-currency='"+e.data.currency+"' data-ttl='"+e.data.ttl+"' data-capital='"+e.data.capital+"'>"+e.name+"</li>"},filterData:function(t,e){return t.filter(function(t,i){return new RegExp(e).test(t.name)||new RegExp(e).test(t.id)||new RegExp(e).test(t.iso)})},findData:function(t,e){return t.find(function(t,i){return new RegExp(e).test(t.name)||new RegExp(e).test(t.id)||new RegExp(e).test(t.phone_code)})},CreateLabel:function(t,e){t.parent().append('<span class="'+e.namespace+'-label">'+e.placeholder+"</span>")},extend:function(t,e){for(var i=1;i<arguments.length;i++)for(var a in arguments[i])arguments[i].hasOwnProperty(a)&&(arguments[0][a]=arguments[i][a]);return arguments[0]},wrap:function(t,e){e=e||document.createElement("div"),t.parentNode.appendChild(e),e.appendChild(t)},getData:function(t,e){e=e.toUpperCase();for(var i in t)if(t[i].iso==e)return t[i]}};a.Initialize=function(){if(this.hasClick=0,this.tabIndex=-1,this.vars=n.extend({},e.defaults,i),this.CreateIso(),this.CreateCountryList(),this.AppendCountryList(),this.KeyupAction(),this.vars.defaultCountry){var t=n.getData(this.vars.dataCountries,this.vars.defaultCountry),a={},s={};for(var r in t)s[r]="data"==r?JSON.stringify(t[r]):t[r];for(var r in t.data)s[r]="phone"==r?"+"+t.data[r]:t.data[r];a.dataset=s,this.SetVal(a)}"function"==typeof this.vars.run&&this.vars.run(this)},a.CreateIso=function(){var t=this.vars;this.classList.add(t.namespace+"-input"),this.setAttribute("placeholder",t.placeholder),this.parent_container=document.createElement("div"),this.parent_container.setAttribute("class",t.namespace+"-container"),this.parent_root=document.createElement("div"),this.parent_root.setAttribute("class",t.namespace+" "+t.namespace+"-run"),this.input_wrap=document.createElement("div"),this.input_wrap.setAttribute("class",t.namespace+"-input-wrap"),this.input_label=document.createElement("span"),this.input_label.setAttribute("class",t.namespace+"-label"),this.input_label.innerHTML=t.placeholder,n.wrap(this,this.parent_root),n.wrap(this,this.parent_container),n.wrap(this,this.input_wrap),this.__ISO=this.parentElement.parentElement.parentElement,this.__root=this.parentElement.parentElement,this.__input_wrap=this.parentElement,this.__input_wrap.appendChild(this.input_label),this.vars.print&&this.CreateInputList()},a.CreateInputList=function(){var t=this.vars;this.list_input=[],this.list_input_wrap=[],this.list_input_label=[],this.list_label_value=[];for(var e in t.printInput){var i=t.printInput[e].type;this.list_input[i]=document.createElement("input"),this.list_input[i].setAttribute("placeholder",t.printInput[e].placeholder),this.list_input[i].setAttribute("name",i+"-country"),this.list_input[i].setAttribute("type","text"),this.list_input[i].setAttribute("class",t.namespace+"-input"),this.list_input_wrap[i]=this.input_wrap.cloneNode(),this.list_input_label[i]=this.input_label.cloneNode(),this.list_input_label[i].innerHTML="Enter "+t.printInput[e].placeholder,this.list_label_value[i]=document.createElement("span"),this.list_label_value[i].setAttribute("class",t.namespace+"-label-value"),this.__root.appendChild(this.list_input_wrap[i]),this.list_input_wrap[i].appendChild(this.list_input[i]),this.list_input_wrap[i].appendChild(this.list_input_label[i]),this.list_input_wrap[i].appendChild(this.list_label_value[i])}},a.CreateCountryList=function(){this.countryListWrap=document.createElement("div"),this.countryListWrap.setAttribute("class",this.vars.namespace+"-country-list-wrap"),this.countryListWrap.setAttribute("style","margin-top: -1px;display:none;"),this.countryList=document.createElement("ul"),this.countryList.setAttribute("class",this.vars.namespace+"-country-list"),this.__input_wrap.appendChild(this.countryListWrap),this.countryListWrap.appendChild(this.countryList),this.OpenList()},a.AppendCountryList=function(){var t="";for(var e in this.vars.dataCountries)t+=n.listHtml(this.vars,this.vars.dataCountries[e]);this.countryList.innerHTML=t,this.countryListChildren=this.countryList.children,this.ClickAction()},a.OpenList=function(){var t=this,e=this.vars;this.addEventListener("focusin",function(){t.countryListWrap.style.display="block",console.log("focusin")}),document.getElementsByTagName("body")[0].addEventListener("click",function(i){console.log(i.target.parentNode.className);var a=e.namespace+"(-input-wrap|-country-list)";new RegExp(a).test(i.target.parentNode.className)||(t.countryListWrap.style.display="none")})},a.KeyupAction=function(t){var e=this;this.addEventListener("keyup",function(t){if(40!=t.keyCode&&38!=t.keyCode){var i=this.value,a="",s=n.filterData(e.vars.dataCountries,i);if(s){for(var r in s)a+=n.listHtml(e.vars,s[r]);e.countryList.innerHTML=a}"function"==typeof e.vars.keyup&&e.vars.keyup(e,i)}e.UseKey(t)})},a.SetVal=function(t){var e=t.dataset;if(this.vars.print)for(var i in this.vars.printInput)console.log(this.vars.printInput[i]),"phone"==this.vars.printInput[i].type||"currency"==this.vars.printInput[i].type?(this.list_input_wrap[this.vars.printInput[i].type].classList.add(this.vars.namespace+"-have-value"),this.list_label_value[this.vars.printInput[i].type].innerHTML=e[this.vars.printInput[i].type]):this.list_input[this.vars.printInput[i].type].value=e[this.vars.printInput[i].type];this.value=e.name},a.ClickAction=function(t){var e=this,i=this.vars;this.countryList.addEventListener("click",function(t){console.log(t);var a=t.target;a="LI"==t.target.nodeName?t.target:t.target.className==i.namespace+"-flag-wrap"?t.target.parentElement:t.target.parentElement.parentElement,console.log(a),e.SetVal(a),"function"==typeof e.vars.selected&&e.vars.selected(e,a.dataset,JSON.parse(a.dataset.data)),e.countryListWrap.style.display="none"})},a.UseKey=function(t){var e=this.vars;40==t.keyCode?(this.tabIndex++,this.countryList.children[this.tabIndex].classList.add(e.namespace+"-selected"),this.tabIndex>=1&&(this.countryList.children[this.tabIndex-1].classList=""),this.tabIndex>=2&&(this.countryListWrap.scrollTop=this.countryList.children[this.tabIndex].offsetTop-2*this.countryList.children[this.tabIndex].offsetHeight),this.SetVal(this.countryList.children[this.tabIndex])):38==t.keyCode&&(this.tabIndex--,this.tabIndex<0&&(this.tabIndex=0),this.countryList.children[this.tabIndex].classList.add(e.namespace+"-selected"),this.tabIndex>=0&&(this.countryList.children[this.tabIndex+1].classList=""),this.tabIndex>=2&&(this.countryListWrap.scrollTop=this.countryList.children[this.tabIndex].offsetTop-2*this.countryList.children[this.tabIndex].offsetHeight),this.SetVal(this.countryList.children[this.tabIndex]))},a.Initialize()}).defaults={dataCountries:[],namespace:"__COUNTRY",placeholder:"Type a Country",showFlag:!1,defaultCountry:"us",print:!0,printInput:[{type:"phone",placeholder:"Phone Number"},{type:"currency",placeholder:"Currency"},{type:"iso_2",placeholder:"Country Iso"}],run:function(){},selected:function(){},keyup:function(){}},t&&(t.fn.COUNTRY_Data=function(t){return this.each(function(){new e(this,t)})}),"undefined"!=typeof module&&void 0!==module.exports?module.exports=e:window.__COUNTRY_Data=e}("function"==typeof window.jQuery&&window.jQuery);